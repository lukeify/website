<!DOCTYPE html>
<html lang="en">
<head>
    <title>luke.kiwi ğŸ¥</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles/type.css">
    <link rel="stylesheet" href="styles/variables.css">
    <link rel="stylesheet" href="styles/global.css">
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="styles/components/emoji.css">
    <link rel="stylesheet" href="styles/components/sticker-of-authenticity.css">
    <script>
        let isRunningAnimation = false;
        let idx = 0;
        let intervalId = null;

        document.addEventListener('visibilitychange', () => document.hidden ? cancelEmojiAnimation() : runEmojiAnimation());
        window.addEventListener('blur', () => cancelEmojiAnimation());
        window.addEventListener('focus', () => runEmojiAnimation());
        document.addEventListener('DOMContentLoaded', () => {
            if (document.hasFocus()) runEmojiAnimation();
        });

        const runEmojiAnimation = () => {
            if (!isRunningAnimation) {
                isRunningAnimation = true;
                const transitionSpeed = 5000;
                const fadeOutDuration = 1200;
                const emojiContainerEl = document.querySelector('.emoji-container');

                const emojiArray = ['ğŸ‘‹', 'ğŸª‚', 'ğŸ‘Ÿ', 'ğŸ¥', 'ğŸ‘¨â€ğŸ’»', 'ğŸ˜›'];

                intervalId = setInterval(() => {
                    if (idx >= emojiArray.length - 1) idx = -1;

                    const nextEmojiEl = document.createElement('span');
                    nextEmojiEl.classList.add('emoji');
                    nextEmojiEl.textContent = emojiArray[++idx];
                    emojiContainerEl.prepend(nextEmojiEl);

                    if (emojiContainerEl.children.length > 1) {
                        emojiContainerEl.lastChild.classList.add('emoji--transitioning-out');
                        setTimeout(() => emojiContainerEl.lastChild.remove(), fadeOutDuration);
                    }
                }, transitionSpeed);
            }
        };

        const cancelEmojiAnimation = () => {
            if (isRunningAnimation) {
                isRunningAnimation = false;
                if (intervalId) {
                    clearInterval(intervalId);
                    intervalId = null;
                }
            }
        };
    </script>
</head>
<body>
    <!-- Above the fold -->
    <h1 class="headline">
        <span class="emoji-container"><span class="emoji">ğŸ‘‹</span></span> Hello!
    </h1>
    <p>I'm <strong>Luke</strong>â€”a software engineer living in ğŸ“ <a href="https://maps.apple.com/?address=Central%20Otago%20District,%20New%20Zealand">Central Otago, New Zealand</a>.</p>
    <p>Currently, I'm a Senior Rails Developer at <a href="https://ackama.com">Ackama</a>; and also run a small business, Bluewing.</p>
    <p>I don't maintain a strong internet presence, but you can see the things I work on, connectâ€”or just send me a message if you'd like to go paragliding together!â€”use the links below.</p>

    <ul>
        <li>GitHub: <a href="https://github.com/lukeify">lukeify</a></li>
    </ul>

    <div class="sticker-of-authenticity">
        <div class="ray ray--sharp-from-center"></div>
        <div class="ray ray--diffuse-from-edge"></div>
        <div class="ring"></div>
    </div>
</body>
</html>
